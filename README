xv6 os

# 第一章

```shell
1.riscv64-unknown-elf-gcc -Wall -Werror -O -fno-omit-frame-pointer -ggdb -gdwarf-2 -DSOL_UTIL -DLAB_UTIL -MD -mcmodel=medany -ffreestanding -fno-common -nostdlib -mno-relax -I. -fno-stack-protector -fno-pie -no-pie -march=rv64g -nostdinc -I. -Ikernel -c user/initcode.S -o user/initcode.o
2.riscv64-unknown-elf-ld -z max-page-size=4096 -N -e start -Ttext 0 -o user/initcode.out user/initcode.o
3.riscv64-unknown-elf-objcopy -S -O binary user/initcode.out user/initcode
```

从用户的角度进行查看以initcode.S程序为例，每一个用户程序都至少需要经历上面两个步骤。

1. 将源代码编译成目标文件。
1. ld链接成ELF文件的过程，xv6的用户链接脚本是从0虚拟地址开始的。
1. 对于第一个用户程序initcode.S特有的命令直接获取执行的指令，放到proc.c文件中。

第一章需要调用user.h中的system calls来实现各种用户程序。

